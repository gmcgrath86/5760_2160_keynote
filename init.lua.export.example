require("hs.ipc")

-- Put keynote_dual_canvas.lua in ~/.hammerspoon/ on the destination Mac.
package.path = package.path .. ";" .. os.getenv("HOME") .. "/.hammerspoon/?.lua"

if hs.accessibilityState and hs.accessibilityState() then
  require("keynote_dual_canvas").bind({
    hotkeyMods = { "ctrl", "alt", "cmd" },
    hotkeyKey = "k",

    -- Update these names on the target machine if they differ.
    playScreenNames = {
      "SwitchResX4 - Desktop (1)",
      "SwitchResX4 - Desktop (2)",
    },
    notesScreenName = "SwitchResX4 - Desktop (3)",

    http = {
      enabled = true,
      bindAddress = "10.2.130.108",
      port = 8765,
      token = nil,
    },

    -- Optional:
    -- deckPath = "/absolute/path/to/your/deck.key",
    -- openDeckOnHotkey = true,
    -- http = {
    --   enabled = true,
    --   bindAddress = "10.2.130.108",
    --   port = 8765,
    --   token = "replace-with-a-secret",
    -- },
  })
else
  hs.printf("Accessibility permission not granted yet; skipping Keynote hotkey bind. Reload after granting access.")
end
